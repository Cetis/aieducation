import{r as t,c as e,h as o,H as r,g as n}from"./p-68751d42.js";import{g as l,s as i,h as c,i as s,l as a,j as u,a as h}from"./p-794a040d.js";import{c as d,a as f}from"./p-3e8ff66b.js";var m=d((function(t){t.exports=function(){const t=(e,o)=>!0===e.matches(o)?e:t(e.parentElement,o),e="data-keyboard-selector",o="data-keyboard-skip";function r(e,{rowSelector:o,cellSelector:r}){const n=[...t(e,o).querySelectorAll(r)],l=n.indexOf(e),i=(c=e,()=>c);var c;return{selectFromAfter:i,selectFromBefore:i,next:()=>void 0!==n[l+1]?n[l+1]:null,previous:()=>void 0!==n[l-1]?n[l-1]:null}}function n(n,l){return null===n?null:n.hasAttribute(o)?function(t,e){const o=r(t,e);return{previous:o.previous,next:o.next}}(n,l):n.hasAttribute(e)||!n.matches(l.cellSelector)?function(o,n){const l=t(o,n.cellSelector),i=l.getAttribute(e),c=[...l.querySelectorAll(i)],s=c.length,a=o!==l;return{selectFromBefore:()=>a?o:c[0],selectFromAfter:()=>a?o:c[s-1],next(){const t=c.indexOf(o);return a&&t+1<s?c[t+1]:r(l,n).next()},previous(){const t=c.indexOf(o);return a&&t>0?c[t-1]:r(l,n).previous()}}}(n,l):r(n,l)}function l(t,e,{rowSelector:o="tr",cellSelector:r="th,td"}={}){const n=[...e.querySelectorAll(o)],l=[...t.querySelectorAll(r)],i=n.indexOf(t);return{previous:()=>void 0!==n[i-1]?n[i-1]:null,next:()=>void 0!==n[i+1]?n[i+1]:null,item:t=>void 0!==l[t]?l[t]:null}}function i(e,r,{rowSelector:n,cellSelector:i}={}){if(null===e)return null;const c=t(e,n);return c.hasAttribute(o)?function(t,e,o){const r=l(t,e,o);return{previous:r.previous,next:r.next}}(c,r,{rowSelector:n,cellSelector:i}):l(e,r,{rowSelector:n,cellSelector:i})}return function(e,{rowSelector:o="tr",cellSelector:r="td,th"}={}){let l=null;const c=function(e,o){const{rowSelector:r,cellSelector:l}=o;return{moveRight(t){const e=n(t,o);let r=n(e.next(),o);for(;null!==r&&void 0===r.selectFromBefore;)r=n(r.next(),o);return null!==r?r.selectFromBefore():t},moveLeft(t){const e=n(t,o);let r=n(e.previous(),o);for(;null!==r&&void 0===r.selectFromAfter;)r=n(r.previous(),o);return null!==r?r.selectFromAfter():t},moveUp(c){const s=t(c,r),a=[...s.querySelectorAll(l)],u=i(s,e,o);let h=i(u.previous(),e,o);for(;null!==h&&void 0===h.item;)h=i(h.previous(),e,o);if(null===h)return c;let d=a.indexOf(t(c,l)),f=n(h.item(d),o);for(;null===f||void 0===f.selectFromBefore&&d>0;)d--,f=n(h.item(d),o);return f.selectFromBefore()},moveDown(c){const s=t(c,r),a=[...s.querySelectorAll(l)],u=i(s,e,o);let h=i(u.next(),e,o);for(;null!==h&&void 0===h.item;)h=i(h.next(),e,o);if(null===h)return c;let d=a.indexOf(t(c,l)),f=n(h.item(d),o);for(;null===f||void 0===f.selectFromBefore&&d>0;)d--,f=n(h.item(d),o);return f.selectFromBefore()}}}(e,{rowSelector:o,cellSelector:r});e.addEventListener("keydown",(({target:t,keyCode:e})=>{let o=null;37===e?o=c.moveLeft(t):38===e?o=c.moveUp(t):39===e?o=c.moveRight(t):40===e&&(o=c.moveDown(t)),null!==o&&(o.focus(),null!==l&&l.setAttribute("tabindex","-1"),o.setAttribute("tabindex","0"),l=o)}))}}()}));const p=class{constructor(o){t(this,o),this.emitter=e(this,"oi-filter",7),this.trigger="country",this.dataSrc=null,this.sortBy="country",this.sort="asc",this.columns="country",this.heatmap=!1,this.useTheme=!1,this.precision=0,this.theme="table",this.pillar=l("pillar")||null}countrySelected(t){t.detail&&t.detail.filter&&"pillar"===t.detail.filter&&this.pillar&&(this.pillar=t.detail.value)}update(){let t=this.data.keyList(this.columns,this.pillar),e=this.emitter,o=this.precision,r="asc"===this.sort,n=this.sortWithNulls,l=t,a=this.data.get(),d=this.data,f=this.heatmap,p=this.useTheme;i(this.pagewrapElement).selectAll("table").remove();let b=i(this.pagewrapElement).append("table");b.attr("aria-label","Country list. Click country names to view details. Scroll to view more."),b.attr("role","grid");let g=this.pillar,w=b.append("thead").append("tr").attr("role","row").selectAll("th").data(l).enter().append("th").attr("width",(100/l.length).toString()+"%").attr("scope","col").attr("tabindex","0").attr("role","columnheader").attr("aria-sort","none").text((function(t){return t===g?t+" (overall)":t})).on("keydown",(function(){"Space"!==c.code&&"Enter"!==c.code||this.click()})).on("click",(function(t){w.attr("class","header"),w.attr("aria-sort","none"),r?(n(v,r,t),r=!1,this.className="aes",this.setAttribute("aria-sort","ascending")):(n(v,r,t),r=!0,this.className="des",this.setAttribute("aria-sort","descending"))})),k=this.trigger,v=b.append("tbody").selectAll("tr").data(a).enter().append("tr"),y=v.selectAll("td").data((function(t){return l.map((function(e){return{value:t.get(e),name:e}}))})).enter().append("td");y.attr("tabindex","-1"),y.attr("data-th",(function(t){return t.name})),y.each((function(t){t.name===k?(i(this).attr("data-keyboard-selector","a"),i(this).append("a").attr("tabindex","-1").attr("href","#profile").text((function(t){return s(t.value,o)})).on("keydown",(function(t){c.preventDefault(),"Space"!==c.code&&"Enter"!==c.code||e.emit({filter:k,value:t.value})})).on("click, mousedown",(function(t){return c.preventDefault(),e.emit({filter:k,value:t.value}),!1}))):i(this).text((function(t){return s(t.value,o)})).attr("style",(function(t){return function(t,e){if(f&&p){let o=Math.floor((Number(t.value)-1)/20),r=o>2?"white":"black";return"background-color:"+u(h(e.getPillar(t.name)),1/(5-o))+"; color:"+r}if(f){let e=Math.floor(Number(t.value)/20),o=e>2?"white":"black";return"background-color: "+u("#2c2951",1/(5-e))+"; color:"+o}return""}(t,d)})).attr("class",(function(t){return!isNaN(Number(t.value))&&f?"quantile-"+Math.floor(Number(t.value)/20):"cell"}))})),"asc"==this.sort?"country"===this.sortBy?v.sort(((t,e)=>0-(t[this.sortBy]>e[this.sortBy]?-1:1))):this.sortWithNulls(v,"asc"==this.sort,this.sortBy):"country"===this.sortBy?v.sort(((t,e)=>0-(t[this.sortBy]>e[this.sortBy]?1:-1))):this.sortWithNulls(v,"asc"==this.sort,this.sortBy),m(this.pagewrapElement.getElementsByTagName("table")[0],{rowSelector:"tr",cellSelector:"th,td"})}sortWithNulls(t,e,o){return t.sort(((t,r)=>{let n=t.get(o),l=r.get(o);return null===n?1:null===l?-1:n===l?0:isNaN(n)||isNaN(l)?e?n.localeCompare(l):l.localeCompare(n):(n=Number(n),l=Number(l),e?n<l?-1:1:n<l?1:-1)}))}async componentWillLoad(){this.pillar=l("pillar")||this.pillar,this.data=await a(this.dataSrc)}componentDidLoad(){this.pagewrapElement=this.element.shadowRoot.getElementById("page-wrap"),this.update()}componentWillUpdate(){}componentDidUpdate(){this.update()}render(){return o(r,null,o("div",{id:"page-wrap",tabindex:"0",class:this.theme}),o("slot",null))}get element(){return n(this)}};p.style=':host{display:block;width:100%;margin:0;padding:0;font-size:0.8rem}#page-wrap{width:100%}p{margin:20px 0}a{color:var(--text-color);text-decoration-color:lightgrey}th{color:var(--text-color)}tr:hover td{opacity:0.8}table{width:100%;background:white;border-collapse:collapse}tr:nth-of-type(odd){background:#F7F9FB}th{background:white;text-transform:capitalize;font-size:1rem;font-weight:lighter;cursor:s-resize;background-repeat:no-repeat;background-position:3% center;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}td,th{padding:6px;border:2px solid white;text-align:left}td:nth-of-type(1){font-weight:bold}th.des:after{content:"↓"}th.aes:after{content:"↑"}td.quantile-5{background-color:#040430;color:white}td.quantile-4{background-color:#040430;color:white}td.quantile-3{background-color:steelblue;color:black}td.quantile-2{background-color:lightsteelblue;color:black}td.quantile-1{background-color:lightsalmon;color:black}td.quantile-0{background-color:#ccc;color:white}.minimal table,.minimal tr,.minimal td,.minimal th,.minimal a{background:none !important;color:var(--light-color) !important;font-weight:normal !important;border:none;width:auto;padding:0;padding-left:5px}.minimal table{margin:auto}';export{p as oi_country_list}